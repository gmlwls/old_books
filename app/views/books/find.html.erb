<style>
  
  .result {
    text-align: center;
    font-size: 1.2rem;
    padding-bottom: 1rem;
  }

    #mobilebtn {
    color: black !important;
  }


  /*
  .books_title {
    height: 50px;
    display: flex;
    justify-content: space-between;
    padding: 4% 10%;
    font-size: 0.9rem;
  }
  .inner-image {
    height: 100%;
    background-size: cover;
    background-repeat: no-repeat;
    background-position: center;
    /*for debugging
    border: 1px solid gray;
  }

  #eachcard a {
    display: flex;
  }

  #eachcard {
    margin: 0.5rem;
    border:none;
    height: 10rem;
  }

  .card-image-top {
    height: 10rem;
    width: 100%;
  }

  .card-body {
    width: 70%;
    right: 0;
  }

  .card {
    margin-right: 0.5rem;
    margin-left: 0.5rem;
    padding-left: 0;
    padding-right: 0;
  }

  
@media all and (max-width: 576px){
  .card-image-top{
    width: 250px;
    height: 250px;
  }
}
@media all and (min-width: 576px) and (max-width: 992px){
  .card-image-top{
    width: 200px;
    height: 200px;
  }
}
@media all and (min-width: 992px) {
  .card-image-top{
    width: 230px;
    height: 230px;
  }
}


*/

</style>

<header>
<%= render 'nav2' %>
</header>

<main>

  <div class="books_title">
    <div class="result"><strong style="font-weight: 600">"<%=params[:search]%>"</strong>에 대한 검색 결과입니다</div>
    <div class="choice">
    <span class="active option" id = "0">전체</span> | <span class="option" id = "1">이름순</span> | <span class="option" id = "2">가격순</span> | <span class="option" id = "3">인기순</span>
    </div>
  </div>

  <div class="book_contents container" style="padding-bottom: 10rem; padding-top: 0rem; min-height: 80vh;">
  
    <div class="no_books"><p style="font-size: 1rem; margin: 0;">책이 없어요ㅠㅠㅠ</p></div>    
  
    <div class="row">
      <%= render 'book_div', books: @books %>
    </div>

  </div>

</main>
<%= render 'footer' %>

<script>
$(document).ready(function () {
    $(document).on('click', '.option', function () {
        $(".active").toggleClass("active");
        $(this).toggleClass("active");
        var opt = $(this).attr('id');
        $(".row").empty();
        if(opt==0) {
          var html = "<%= escape_javascript(render(partial: 'book_div', locals: {books: @books.sort_by{ |b| b.id}})) %>";
        }
        else if(opt==1){
          var html = "<%= escape_javascript(render(partial: 'book_div', locals: {books: @books.sort_by{ |b| b.bookname}})) %>";
        }
        else if(opt==2){
          var html = "<%= escape_javascript(render(partial: 'book_div', locals: {books: @books.sort_by{ |b| b.price}})) %>";
        }
        else{
          var html = "<%= escape_javascript(render(partial: 'book_div', locals: {books: @books.sort_by{ |b| b.likes.size*-1}})) %>";
        }
        
        $(".row").append(html);
    });

    // 검색 결과 유무에 따라 멘트 등장
    var cardnum = $('.card-title').length;
    if(cardnum==0) {
      $('.no_books').css('visibility','visible');
      $('.no_books').css('height','1rem');
    }
    else {
      $('.no_books').css('visibility','hidden');
      $('.no_books').css('height','0');
    }
});  
</script>