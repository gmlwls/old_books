<style>
@font-face { font-family: 'Binggrae-Bold'; src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_one@1.0/Binggrae-Bold.woff') format('woff'); font-weight: normal; font-style: normal; }

nav {
  height: 50px;
  border-bottom: 1px solid rgba(184,184,184, 0.3);
}

#navbarNav {
  margin-right: 11%;
  margin-left: -15%;
}

#navbarNav.shown {
  margin-right: 11%;
  margin-left: -15%;
}
  
.top-searchbar {
  visibility: hidden;
}

.top-searchbar.shown {
  width: 25%;
	color: black;
  visibility : visible;
  transition: 0.4s all;
}

.top-searchbar input#search {
  width: 100%;
  visibility: hidden;
}

.top-searchbar input#search.shown{
  width: 100%;
  transition: 0.2s all;
  visibility: visible;
}

</style>

<nav class="navbar navbar-expand-lg navbar-light">
  <%= link_to root_path, class: 'logo-link', style: 'margin-left: 11%' do%>
    <div class="logo">반짝</div>
  <% end %>
  <nav class= "top-searchbar nav-search">
	  <%= form_tag(books_find_path, method: :get, class: 'form-inline search-form') do %>
      <%= text_field_tag "search", nil, class: "form-control mr-sm-2 search", placeholder: "전공책 또는 저자로 검색해주세요", type: 'search' %>
    <% end %>
  </nav>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse head-nav" id="navbarNav">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" id="search2" href=<%= root_path%>>검색하기</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="regist" href=<%= new_book_path%>>책 등록하기</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="mypage" href=<%= mypage_path%>>마이페이지</a>
      </li>
      <% if user_signed_in? %>
      <li class="nav-item read">
        <div class="dropdown" id="bell1">
          <a class="dropdown-toggle" id="dropdownAlart" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><b id="bell2"><i class="far fa-bell" style="color: #fdd400"></i><%= current_user.new_notifications.unread_by(current_user).count %></b></a>
          <div class="dropdown-menu" aria-labelledby="dropdownAlart">
            <%= render partial: "new_notifications/new_notification", collection: current_user.new_notifications.unread_by(current_user) %>
            <div class="dropdown-divider"></div>
            <%= link_to '<b>모든 알림 지우기</b>'.html_safe, new_notifications_read_all_path, class: 'dropdown-item' %>
          </div>
        </div>
      </li>
      <li class="nav-item"> 
        <a class="nav-link log" id = "logs" href=<%=destroy_user_session_path%> data-method= 'delete'>로그아웃</a>
      </li>
      <% else %>
      <li class="nav-item">
        <a class="nav-link log" id="logs" href=<%=new_user_session_path%>>로그인</a>
      </li>
      <li class="nav-item">
        <a class="nav-link log" id = "logs" href=<%= new_user_registration_path%>>회원가입</a>
      </li>
      <% end %>
    </ul>
  </div>
</nav>


<script>
	$(document).scroll(function() {
		if ($(window).scrollTop() > 350) {
      $('a#search2, a#regist, a#mypage, a#logs, .dropdown#bell1, b#bell2').css("color", "black");
      $('.logo-link').css("margin-top","0%");
    }
		else {
      $('a#search2, a#regist, a#mypage, a#logs, .dropdown#bell1, b#bell2').css("color", "black");
      $('.logo-link').css("margin-top","0%");
    }		
	});
</script>
